;
; Copyright (c) Microsoft Corporation.  All rights reserved.
;
;
; Use of this source code is subject to the terms of the Microsoft end-user
; license agreement (EULA) under which you licensed this SOFTWARE PRODUCT.
; If you did not accept the terms of the EULA, you are not authorized to use
; this source code. For a copy of the EULA, please see the LICENSE.RTF on your
; install media.
;
;

;
; This section named FIRSTBOOT, start at 0x300000 - 0x1000
; This is made to correct the 0x1000 byte added at the start of the 
; linked binary.
; So, with this correction, firstboot was correctly link 0x1000 byte before
;

MEMORY
;   Name      Start     Size      Type
;   -------   --------  --------  ----
IF CONFIG_DATAFLASH
    IF AT91SAM9G10
        FIRSTBOOT 002FF000  00003000  RAMIMAGE    
	    RAM       00303000  00003000  RAM
    ENDIF
    IF AT91SAM9G20
        FIRSTBOOT 001FF000  00005000  RAMIMAGE    
	    RAM       00300000  00003000  RAM
    ENDIF
    IF AT91SAM9G45
        FIRSTBOOT 002FF000  00004000  RAMIMAGE    
	    RAM       00303000  00004000  RAM
    ENDIF
    IF AT91SAM9M10
        FIRSTBOOT 002FF000  00004000  RAMIMAGE    
	    RAM       00303000  00004000  RAM
    ENDIF
    IF AT91SAM9RL
        FIRSTBOOT 002FF000  00004000  RAMIMAGE    
	    RAM       00303000  00004000  RAM
    ENDIF
    IF AT91SAM9263
        FIRSTBOOT 002FF000  00004000  RAMIMAGE    
	    RAM       00303000  00004000  RAM
    ENDIF
    IF AT91SAM9261
        FIRSTBOOT 002FF000  00004000  RAMIMAGE    
	    RAM       00303000  00004000  RAM
    ENDIF
    IF AT91SAM9260
        FIRSTBOOT 001FF000  00005000  RAMIMAGE    
	    RAM       00300000  00003000  RAM
    ENDIF
ENDIF

IF CONFIG_NANDFLASH
    IF AT91SAM9G10
        FIRSTBOOT 002FF000  00003000  RAMIMAGE    
	    RAM       00303000  00003000  RAM
    ENDIF
    IF AT91SAM9G20
        FIRSTBOOT 001FF000  00005000  RAMIMAGE    
	    RAM       00300000  00003000  RAM
    ENDIF
    IF AT91SAM9G45
	    FIRSTBOOT 002FF000  00004000  RAMIMAGE    
		RAM       00303000  00004000  RAM
    ENDIF
    IF AT91SAM9M10
	    FIRSTBOOT 002FF000  00004000  RAMIMAGE    
		RAM       00303000  00004000  RAM
    ENDIF
    IF AT91SAM9RL
        FIRSTBOOT 002FF000  00004000  RAMIMAGE    
	    RAM       00303000  00004000  RAM
    ENDIF
    IF AT91SAM9263
        FIRSTBOOT 002FF000  00004000  RAMIMAGE    
	    RAM       00303000  00004000  RAM
    ENDIF
    IF AT91SAM9261
        FIRSTBOOT 002FF000  00004000  RAMIMAGE    
	    RAM       00303000  00004000  RAM
    ENDIF
    IF AT91SAM9260
        FIRSTBOOT 001FF000  00004000  RAMIMAGE    
	    RAM       00300000  00003000  RAM
    ENDIF
ENDIF

IF CONFIG_SDCARD
    IF AT91SAM9G10
        FIRSTBOOT 002FF000  00003000  RAMIMAGE    
	    RAM       00303000  00003000  RAM
    ENDIF
    IF AT91SAM9G20
        FIRSTBOOT 001FF000  00005000  RAMIMAGE    
	    RAM       00300000  00003000  RAM
    ENDIF
    IF AT91SAM9G45
        FIRSTBOOT 002FF000  00007000  RAMIMAGE    
	    RAM       00306000  00004000  RAM
    ENDIF
    IF AT91SAM9M10
        FIRSTBOOT 002FF000  00007000  RAMIMAGE    
	    RAM       00306000  00004000  RAM
    ENDIF
    IF AT91SAM9RL
        FIRSTBOOT 002FF000  00007000  RAMIMAGE    
	    RAM       00306000  00004000  RAM
    ENDIF
    IF AT91SAM9263
        FIRSTBOOT 002FF000  00007000  RAMIMAGE    
	    RAM       00306000  00004000  RAM
    ENDIF
ENDIF

CONFIG
	COMPRESSION=ON
	PROFILE=OFF
	KERNELFIXUPS=ON

IF CONFIG_DATAFLASH
    IF AT91SAM9G10
		ROMSTART=00300000
		ROMWIDTH=32
		ROMSIZE=00002000
    ENDIF
    IF AT91SAM9G20
		ROMSTART=00200000
		ROMWIDTH=32
		ROMSIZE=00004000
    ENDIF
    IF AT91SAM9G45
		ROMSTART=00300000
		ROMWIDTH=32
		ROMSIZE=00004000
    ENDIF
    IF AT91SAM9M10
		ROMSTART=00300000
		ROMWIDTH=32
		ROMSIZE=00004000
    ENDIF
    IF AT91SAM9RL
		ROMSTART=00300000
		ROMWIDTH=32
		ROMSIZE=00004000
    ENDIF
    IF AT91SAM9263
		ROMSTART=00300000
		ROMWIDTH=32
		ROMSIZE=00004000
    ENDIF
    IF AT91SAM9261
		ROMSTART=00300000
		ROMWIDTH=32
		ROMSIZE=00004000
    ENDIF
    IF AT91SAM9260
		ROMSTART=00200000
		ROMWIDTH=32
		ROMSIZE=00001000
    ENDIF
ENDIF

IF CONFIG_NANDFLASH
    IF AT91SAM9G10
		ROMSTART=00300000
		ROMWIDTH=32
		ROMSIZE=00002000
    ENDIF
    IF AT91SAM9G20
		ROMSTART=00200000
		ROMWIDTH=32
		ROMSIZE=00004000
    ENDIF
    IF AT91SAM9G45
		ROMSTART=00300000
		ROMWIDTH=32
		ROMSIZE=00004000
    ENDIF
    IF AT91SAM9M10
		ROMSTART=00300000
		ROMWIDTH=32
		ROMSIZE=00004000
    ENDIF
    IF AT91SAM9RL
		ROMSTART=00300000
		ROMWIDTH=32
		ROMSIZE=00004000
    ENDIF
    IF AT91SAM9263
		ROMSTART=00300000
		ROMWIDTH=32
		ROMSIZE=00004000
    ENDIF
    IF AT91SAM9261
		ROMSTART=00300000
		ROMWIDTH=32
		ROMSIZE=00004000
    ENDIF
    IF AT91SAM9260
		ROMSTART=00200000
		ROMWIDTH=32
		ROMSIZE=00001000
    ENDIF
ENDIF

IF CONFIG_SDCARD
    IF AT91SAM9G10
	    ROMSTART=00300000
	    ROMWIDTH=32
	    ROMSIZE=00002000
    ENDIF
    IF AT91SAM9G20
	    ROMSTART=00200000
	    ROMWIDTH=32
	    ROMSIZE=00004000
    ENDIF
    IF AT91SAM9G45
	    ROMSTART=00300000
	    ROMWIDTH=32
	    ROMSIZE=00007000
    ENDIF
    IF AT91SAM9M10
	    ROMSTART=00300000
	    ROMWIDTH=32
	    ROMSIZE=00007000
    ENDIF
    IF AT91SAM9RL
	    ROMSTART=00300000
	    ROMWIDTH=32
	    ROMSIZE=00007000
    ENDIF
    IF AT91SAM9263
	    ROMSTART=00300000
	    ROMWIDTH=32
	    ROMSIZE=00007000
    ENDIF
ENDIF

MODULES
;   Name        Path                                                               Memory Type
;   ----------  --------------------------------------------------------------     -----------
    nk.exe      obj\$(_TGTCPU)\$(WINCEDEBUG)\FirstBoot.exe     FIRSTBOOT

